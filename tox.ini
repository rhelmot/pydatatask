[tox]
min_version = 4.0
env_list =
	py312
	py311
	py310
	py39
	py38
	type
	lint
	fmt-ci

[testenv]
passenv =
	PYDATATASK_TEST_KUBE_CONTEXT
	PYDATATASK_TEST_KUBE_NAMESPACE
	PYDATATASK_TEST_MINIO_ENDPOINT
	PYDATATASK_TEST_MINIO_USERNAME
	PYDATATASK_TEST_MINIO_PASSWORD
	PYDATATASK_TEST_MINIO_SECURE
	PYDATATASK_TEST_MONGODB_URL
extras = test
commands = pytest

[testenv:type]
labels = analyze-ci
extras = type
commands = mypy pydatatask

[testenv:fmt]
labels = devhook
deps =
	black
	isort
skip_install = true
commands =
	black .
	isort .

[testenv:fmt-ci]
labels = analyze-ci
deps =
	black
	isort
skip_install = true
commands =
	black --check .
	isort --check .

[testenv:lint]
labels = analyze-ci
extras =
	lint
commands = pylint pydatatask
